<h1>Users</h1>

<p>
  <%= link_to 'New User', new_user_path %>
</p>

<% if @users.any? %>
  <table>
    <tr>
      <th>First Name</th>
      <th>Middle Name</th>
      <th>Last Name</th>
      <th>Phone</th>
      <th>Email</th>
      <th></th>
    </tr>

    <% @users.each do |user| %>
      <tr>
        <td><%= user.first_name %></td>
        <td><%= user.middle_name %></td>
        <td><%= user.last_name %></td>
        <td><%= user.phone %></td>
        <td><%= user.email %></td>
        <td><%= link_to 'Show', user_path(user) %></td>
        <td><%= link_to 'Edit User', edit_user_path(user) %></td>

        <% if user.profile.present? %>
          <td><%= link_to 'Edit Profile', edit_profile_path(user.profile, user_id: user.id) %></td>
        <% else %>
          <td><%= link_to 'Add Profile', new_profile_path(user_id: user.id) %></td>
        <% end %>

        <% if user.employment_records.any? %>
          <td><%= link_to 'View Employment Records', employment_records_path(user_id: user.id) %></td>
        <% else %>
          <td><%= link_to 'Add Employment Record', new_employment_record_path(user_id: user.id) %></td>
        <% end %>
        <td><%= link_to 'Destroy', user_path(user), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  <% else %>
    <p>No Users Have been Entered</p>
  <% end %>
</table>